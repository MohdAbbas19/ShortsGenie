<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ShortsGenie</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen">
  <div class="w-full max-w-3xl bg-gray-800 p-6 rounded-2xl shadow-lg space-y-6">
    <h1 class="text-2xl font-bold text-center text-yellow-400">ðŸŽ¬ ShortsGenie</h1>

    <!-- âœ… Wrapped inputs in a form -->
    <form id="scriptForm" class="space-y-4">
      <label for="idea" class="block font-semibold">Topic</label>
      <textarea 
        id="idea" 
        name="idea"
        class="w-full p-3 rounded-lg bg-gray-700 text-white"
        rows="4" 
        placeholder="Enter your video idea..."
        required
      ></textarea>

      <label for="scriptLang" class="block font-semibold">Script Language</label>
      <select id="scriptLang" name="scriptLang" class="w-full p-3 rounded-lg bg-gray-700 text-white">
        <option value="English">English</option>
        <option value="Hindi">Hindi</option>
        <option value="Urdu">Urdu</option>
        <option value="Turkish">Turkish</option>
        <option value="Arabic">Arabic</option>
        <option value="German">German</option>
        <option value="French">French</option>
      </select>

      <label for="length" class="block font-semibold">Script Length</label>
<select id="length" name="length" class="w-full p-3 rounded-lg bg-gray-700 text-white">
  <option value="short">30 Seconds (YouTube Shorts)</option>
  <option value="long">2â€“5 Minutes</option>
  <option value="ten">10 Minutes</option>
  <option value="fifteen">15 Minutes</option>
</select>


      <label for="voiceLang" class="block font-semibold">Voice Language</label>
      <select id="voiceLang" name="voiceLang" class="w-full p-3 rounded-lg bg-gray-700 text-white">
        <option value="en">English</option>
        <option value="hi">Hindi</option>
        <option value="ur">Urdu</option>
        <option value="tr">Turkish</option>
        <option value="ar">Arabic</option>
        <option value="de">German</option>
        <option value="fr">French</option>
      </select>

      <button 
        type="submit" 
        class="w-full py-3 bg-yellow-500 text-black font-bold rounded-lg hover:bg-yellow-400 transition"
      >
        ðŸš€ Generate Script
      </button>
    </form>

    <div id="result" class="hidden">
      <h2 class="text-xl font-semibold">ðŸ“œ Script</h2>
      <p id="scriptText" class="bg-gray-700 p-3 rounded-lg max-h-96 overflow-y-auto"></p>


      <button 
  id="generateBtn"
  class="w-full py-3 bg-yellow-500 text-black font-bold rounded-lg 
       hover:bg-yellow-400 active:bg-yellow-300 shadow-lg 
       transition transform hover:scale-105 mt-4"
>
  ðŸš€ Generate Voiceover
</button>
</div>
<div id="result2" class="hidden">
      <h2 class="text-xl font-semibold mt-4">ðŸ”Š Voiceover</h2>
      <audio id="audio" controls class="w-full mt-2"></audio>
    </div>
  </div>

  <script>
    const form = document.getElementById("scriptForm");

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const topic = document.getElementById("idea").value;
  const scriptLang = document.getElementById("scriptLang").value;
  const voiceLang = document.getElementById("voiceLang").value;
  const length = document.getElementById("length").value;

const scriptRes = await fetch("/generate-script", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ topic, lang: scriptLang, length })  // corrected
});

  const scriptData = await scriptRes.json();
  document.getElementById("scriptText").textContent = scriptData.script;

  document.getElementById("result").classList.remove("hidden");
  });

const generateAudioBtn = document.getElementById("generateBtn");

generateAudioBtn.addEventListener("click", async (e) => {
  e.preventDefault();

  const scriptText = document.getElementById("scriptText").textContent;
  const voiceLang = document.getElementById("voiceLang").value;

  const audioRes = await fetch("/generate_audio", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ text: scriptText, voiceLang })
  });

  const audioData = await audioRes.json();
  document.getElementById("audio").src = audioData.audio;

  document.getElementById("result2").classList.remove("hidden");
});


  </script>
</body>
</html>
